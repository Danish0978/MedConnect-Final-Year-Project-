"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[145],{4145:(e,a,i)=>{i.r(a),i.d(a,{default:()=>u});var s=i(5043),t=(i(4748),i(1772)),r=i(5560),l=i(3216),n=i(6213),c=i(3768),o=i(8271),d=(i(6023),i(579));const m=()=>{const e=(0,l.Zp)(),[a,i]=(0,s.useState)(!1),[t,r]=(0,s.useState)([]),[m,u]=(0,s.useState)({specialization:"",experience:0,feePerConsultation:0,clinicId:"",clinicName:"",availability:{monday:{isAvailable:!1,startTime:"",endTime:""},tuesday:{isAvailable:!1,startTime:"",endTime:""},wednesday:{isAvailable:!1,startTime:"",endTime:""},thursday:{isAvailable:!1,startTime:"",endTime:""},friday:{isAvailable:!1,startTime:"",endTime:""},saturday:{isAvailable:!1,startTime:"",endTime:""},sunday:{isAvailable:!1,startTime:"",endTime:""}},timings:[9,18]});(0,s.useEffect)((()=>{(async()=>{try{const e=await n.A.get("/clinic/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data&&e.data.success&&Array.isArray(e.data.data)?r(e.data.data):(console.error("Invalid response structure:",e.data),c.Ay.error("Failed to fetch clinics: Invalid response structure"))}catch(e){console.error("Error fetching clinics:",e),c.Ay.error("Failed to fetch clinics")}})()}),[]);const p=e=>{const{name:a,value:i}=e.target;u((e=>({...e,[a]:i})))},v=(e,a,i)=>{u((s=>({...s,availability:{...s.availability,[e]:{...s.availability[e],[a]:"isAvailable"===a?i.target.checked:i}}})))};return(0,d.jsx)("section",{className:"apply-doctor-section flex-center",children:(0,d.jsxs)("div",{className:"apply-doctor-container flex-center",children:[(0,d.jsx)("h2",{className:"form-heading",children:"Apply as a Doctor"}),(0,d.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),i(!0);try{const{specialization:a,experience:i,feePerConsultation:s,clinicId:t,availability:r,timings:l}=m;if(!a||!i||!s||!t||!l)return void c.Ay.error("All fields are required");if(!Object.values(r).every((e=>!e.isAvailable||e.startTime&&e.endTime)))return void c.Ay.error("Please provide valid timings for available days");const o=await n.A.post("/doctor/register",{...m},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o.data.success?(c.Ay.success(o.data.message),e("/")):c.Ay.error(o.data.message)}catch(r){var s,t;console.error("Error submitting form:",r),c.Ay.error((null===(s=r.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Something went wrong")}finally{i(!1)}},className:"register-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Select Clinic"}),(0,d.jsxs)("select",{name:"clinicName",value:m.clinicName,onChange:e=>{const a=e.target.value,i=t.find((e=>e.name===a));u(i?e=>({...e,clinicId:i._id,clinicName:i.name}):e=>({...e,clinicId:"",clinicName:""}))},className:"form-input",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select a clinic"}),t.map((e=>(0,d.jsx)("option",{value:e.name,children:e.name},e._id)))]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Specialization"}),(0,d.jsx)("input",{type:"text",name:"specialization",className:"form-input",placeholder:"Enter your specialization",value:m.specialization,onChange:p,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Experience (years)"}),(0,d.jsx)("input",{type:"number",name:"experience",className:"form-input",placeholder:"Enter your experience in years",value:m.experience,onChange:p,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Fee per Consultation"}),(0,d.jsx)("input",{type:"number",name:"feePerConsultation",className:"form-input",placeholder:"Enter your fee per consultation",value:m.feePerConsultation,onChange:p,required:!0})]}),(0,d.jsxs)("div",{className:"availability-section",children:[(0,d.jsx)("h3",{children:"Availability"}),Object.entries(m.availability).map((e=>{let[a,i]=e;return(0,d.jsxs)("div",{className:"day-availability",children:[(0,d.jsxs)("div",{className:"day-header",children:[(0,d.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:i.isAvailable,onChange:e=>v(a,"isAvailable",e)}),(0,d.jsx)("label",{children:a.charAt(0).toUpperCase()+a.slice(1)})]}),i.isAvailable&&(0,d.jsxs)("div",{className:"time-inputs",children:[(0,d.jsx)("input",{type:"time",className:"form-input",value:i.startTime,onChange:e=>v(a,"startTime",e.target.value),required:i.isAvailable}),(0,d.jsx)("span",{children:"to"}),(0,d.jsx)("input",{type:"time",className:"form-input",value:i.endTime,onChange:e=>v(a,"endTime",e.target.value),required:i.isAvailable})]})]},a)}))]}),(0,d.jsx)("button",{type:"submit",className:"btn form-btn",disabled:a,children:a?(0,d.jsx)(o.A,{}):"Apply"})]})]})})},u=()=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.A,{}),(0,d.jsx)(m,{})," ",(0,d.jsx)(r.A,{})]})},4748:()=>{}}]);
//# sourceMappingURL=145.06072b6a.chunk.js.map