/*! For license information please see 76.1515f0d6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[76],{1884:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(7784).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},1972:()=>{},5621:(e,a,s)=>{s.d(a,{A:()=>m});var r=s(5043),t=s(6213),i=s(3768),n=s(9456),o=s(5089),l=s(8271),d=(s(8067),s(5369)),c=(s(5069),s(7070)),h=s(579);const m=()=>{const[e,a]=(0,r.useState)([]),[s,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(null),[x,j]=(0,r.useState)(!1),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)("all"),[f,N]=(0,r.useState)({status:"",shippingInfo:{name:"",address:"",city:"",phone:"",notes:""},items:[]}),[k,A]=(0,r.useState)(localStorage.getItem("token")||""),[C,w]=(0,r.useState)(localStorage.getItem("token")?(0,c.A)(localStorage.getItem("token")):""),S=(0,n.wA)(),{loading:I}=(0,n.d4)((e=>e.root));(0,r.useEffect)((()=>{(async()=>{try{S((0,o.r1)(!0));const e=localStorage.getItem("token");let s="/order/all";null!==C&&void 0!==C&&C.isSuperAdmin&&(s="/order/superadmin/all");const{data:r}=await t.A.get(s,{headers:{authorization:`Bearer ${e}`}}),i=null!==C&&void 0!==C&&C.isSuperAdmin?await z(r.orders||[]):r.orders||[];a(i),m(i)}catch(e){i.oR.error("Failed to fetch orders"),console.error("Fetch error:",e)}finally{S((0,o.r1)(!1))}})()}),[S,null===C||void 0===C?void 0:C.isSuperAdmin]);const z=async e=>{try{const a=[...new Set(e.map((e=>e.pharmacy)))],{data:s}=await t.A.post("/pharmacy/getmultiple",{ids:a},{headers:{authorization:`Bearer ${k}`}}),r=s.pharmacies.reduce(((e,a)=>(e[a._id]=a,e)),{});return e.map((e=>({...e,pharmacyInfo:r[e.pharmacy]||null})))}catch(a){return console.error("Error fetching pharmacy info:",a),e}};(0,r.useEffect)((()=>{let a=e;g&&(a=a.filter((e=>{var a,s,r,t,i,n;return e.orderNumber.toLowerCase().includes(g.toLowerCase())||(null===(a=e.patient)||void 0===a||null===(s=a.name)||void 0===s?void 0:s.toLowerCase().includes(g.toLowerCase()))||(null===(r=e.shippingInfo)||void 0===r||null===(t=r.name)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===(i=e.pharmacyInfo)||void 0===i||null===(n=i.name)||void 0===n?void 0:n.toLowerCase().includes(g.toLowerCase()))}))),"all"!==y&&(a=a.filter((e=>e.status===y))),m(a)}),[g,y,e]);const M=e=>{const{name:a,value:s}=e.target;if(a.startsWith("shippingInfo.")){const e=a.split(".")[1];N((a=>({...a,shippingInfo:{...a.shippingInfo,[e]:s}})))}else N((e=>({...e,[a]:s})))},R=async e=>{e.preventDefault();try{S((0,o.r1)(!0));const e=localStorage.getItem("token"),{data:s}=await t.A.put(`/order/${u._id}`,f,{headers:{authorization:`Bearer ${e}`}});a((e=>e.map((e=>e._id===u._id?{...e,...s}:e)))),i.oR.success("Order updated successfully"),j(!1)}catch(n){var s,r;i.oR.error((null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to update order")}finally{S((0,o.r1)(!1))}};return x&&u?(0,h.jsxs)("div",{className:"pharmacy-orders-container",children:[(0,h.jsxs)("div",{className:"dashboard-content",children:[(0,h.jsxs)("button",{onClick:()=>j(!1),className:"back-button",children:[(0,h.jsx)(d.QVr,{})," Back to Orders"]}),(0,h.jsxs)("h2",{children:["Edit Order #",u.orderNumber]}),(0,h.jsxs)("form",{onSubmit:R,className:"order-edit-form",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Status"}),(0,h.jsxs)("select",{name:"status",value:f.status,onChange:M,children:[(0,h.jsx)("option",{value:"processing",children:"Processing"}),(0,h.jsx)("option",{value:"shipped",children:"Shipped"}),(0,h.jsx)("option",{value:"completed",children:"Completed"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),"online"===u.orderType&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h3",{children:"Shipping Information"}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Name"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.name",value:f.shippingInfo.name,onChange:M})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Address"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.address",value:f.shippingInfo.address,onChange:M})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"City"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.city",value:f.shippingInfo.city,onChange:M})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Phone"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.phone",value:f.shippingInfo.phone,onChange:M})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Notes"}),(0,h.jsx)("textarea",{rows:1,name:"shippingInfo.notes",value:f.shippingInfo.notes,onChange:M})]})]}),(0,h.jsx)("h3",{children:"Order Items"}),(0,h.jsx)("div",{className:"order-items-edit",children:f.items.map(((e,a)=>{var s;return(0,h.jsxs)("div",{className:"order-item",children:[(0,h.jsxs)("div",{className:"item-info",children:[(0,h.jsx)("span",{children:(null===(s=e.medicineId)||void 0===s?void 0:s.name)||`Medicine ${e.medicineId._id}`}),(0,h.jsxs)("span",{children:["Rs. ",e.price.toFixed(2)," each"]})]}),(0,h.jsxs)("div",{className:"item-quantity",children:[(0,h.jsx)("label",{children:"Qty:"}),(0,h.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:e=>((e,a,s)=>{const r=[...f.items];r[e][a]="quantity"===a?parseInt(s):s,N((e=>({...e,items:r})))})(a,"quantity",e.target.value)})]})]},a)}))}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"button",onClick:()=>j(!1),className:"btn secondary",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"btn primary",children:"Save Changes"})]})]})]}),"      "]}):(0,h.jsx)("div",{className:"pharmacy-orders-container",children:(0,h.jsx)("div",{className:"dashboard-content",children:I?(0,h.jsx)(l.A,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h2",{children:null!==C&&void 0!==C&&C.isSuperAdmin?"All Pharmacy Orders":"My Pharmacy Orders"}),(0,h.jsxs)("div",{className:"order-filters",children:[(0,h.jsxs)("div",{className:"search-box",children:[(0,h.jsx)(d.KSO,{className:"search-icon"}),(0,h.jsx)("input",{type:"text",placeholder:"Search orders...",value:g,onChange:e=>v(e.target.value)})]}),(0,h.jsxs)("div",{className:"filter-dropdown",children:[(0,h.jsx)(d.YsJ,{className:"filter-icon"}),(0,h.jsxs)("select",{value:y,onChange:e=>b(e.target.value),children:[(0,h.jsx)("option",{value:"all",children:"All Statuses"}),(0,h.jsx)("option",{value:"processing",children:"Processing"}),(0,h.jsx)("option",{value:"shipped",children:"Shipped"}),(0,h.jsx)("option",{value:"completed",children:"Completed"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,h.jsx)("div",{className:"table-responsive",children:(0,h.jsxs)("table",{className:"dashboard-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Order #"}),(null===C||void 0===C?void 0:C.isSuperAdmin)&&(0,h.jsx)("th",{children:"Pharmacy"}),(0,h.jsx)("th",{children:"Customer"}),(0,h.jsx)("th",{children:"Total"}),(0,h.jsx)("th",{children:"Status"}),(0,h.jsx)("th",{children:"Date"}),!C.isSuperAdmin&&(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)("tbody",{children:s.length>0?s.map((e=>{var s,r,n;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.orderNumber}),(null===C||void 0===C?void 0:C.isSuperAdmin)&&(0,h.jsx)("td",{children:e.pharmacyInfo?(0,h.jsxs)("div",{className:"pharmacy-info",children:[(0,h.jsx)("div",{className:"pharmacy-name",children:e.pharmacyInfo.name}),(0,h.jsxs)("div",{className:"pharmacy-address",children:[e.pharmacyInfo.address,", ",e.pharmacyInfo.city]})]}):"Unknown Pharmacy"}),(0,h.jsx)("td",{children:(null===(s=e.patient)||void 0===s?void 0:s.name)||(null===(r=e.shippingInfo)||void 0===r?void 0:r.name)||"Pharmacy"}),(0,h.jsxs)("td",{children:["Rs. ",null===(n=e.totalAmount)||void 0===n?void 0:n.toFixed(2)]}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:`status-badge ${e.status}`,children:e.status})}),(0,h.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,h.jsx)("td",{className:"actions",children:!C.isSuperAdmin&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{onClick:()=>(e=>{p(e),N({status:e.status,shippingInfo:e.shippingInfo||{name:"",address:"",city:"",phone:"",notes:""},items:e.items.map((e=>{var a;return{...e,medicineId:null!==(a=e.medicineId)&&void 0!==a&&a._id?e.medicineId:{_id:e.medicineId}}}))}),j(!0)})(e),className:"btn-icon",title:"Edit",children:(0,h.jsx)(d.uO9,{})}),(0,h.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this order?"))try{S((0,o.r1)(!0));const s=localStorage.getItem("token");await t.A.delete(`/order/${e}`,{headers:{authorization:`Bearer ${s}`}}),a((a=>a.filter((a=>a._id!==e)))),i.oR.success("Order deleted successfully")}catch(s){i.oR.error("Failed to delete order")}finally{S((0,o.r1)(!1))}})(e._id),className:"btn-icon danger",title:"Delete",children:(0,h.jsx)(d.qbC,{})})]})})]},e._id)})):(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:null!==C&&void 0!==C&&C.isSuperAdmin?7:6,className:"no-orders",children:"No orders found matching your criteria"})})})]})})]})})})}},9076:(e,a,s)=>{s.r(a),s.d(a,{default:()=>_});var r=s(5043),t=s(3797),i=s(9112),n=s(1375),o=s(5621),l=s(1492),d=s(6213),c=s(3768),h=s(3216),m=s(9456),u=s(5089),p=(s(8271),s(8067),s(579));const x=()=>{const[e,a]=(0,r.useState)([]),s=(0,m.wA)(),t=(0,h.Zp)(),{loading:i,user:n}=(0,m.d4)((e=>e.root)),o=async()=>{try{s((0,u.r1)(!0));const{data:e}=await d.A.get("/pharmacyreceptionist/receptionists",{headers:{authorization:`Bearer ${localStorage.getItem("token")}`}}),r=Array.isArray(e.data)?e.data:e.data?[e.data]:[];a(r)}catch(i){var e,r,t;console.error("Fetch error:",(null===(e=i.response)||void 0===e?void 0:e.data)||i.message),c.oR.error((null===(r=i.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||"Failed to fetch receptionists")}finally{s((0,u.r1)(!1))}};return(0,r.useEffect)((()=>{o()}),[]),(0,p.jsxs)("section",{className:"user-section",children:[(0,p.jsx)("h3",{className:"home-sub-heading",children:"Pharmacy Receptionists"}),(null===e||void 0===e?void 0:e.length)>0?(0,p.jsx)("div",{className:"user-container",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"S.No"}),(0,p.jsx)("th",{children:"Name"}),(0,p.jsx)("th",{children:"Email"}),(0,p.jsx)("th",{children:"Phone"}),(0,p.jsx)("th",{children:"Status"}),(0,p.jsx)("th",{children:"Actions"})]})}),(0,p.jsx)("tbody",{children:e.map(((e,a)=>{var s,r,i,n;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:a+1}),(0,p.jsxs)("td",{children:[(null===(s=e.userId)||void 0===s?void 0:s.firstname)||"N/A"," ",(null===(r=e.userId)||void 0===r?void 0:r.lastname)||""]}),(0,p.jsx)("td",{children:(null===(i=e.userId)||void 0===i?void 0:i.email)||"N/A"}),(0,p.jsx)("td",{children:(null===(n=e.userId)||void 0===n?void 0:n.mobile)||"N/A"}),(0,p.jsx)("td",{children:e.status||"N/A"}),(0,p.jsxs)("td",{className:"action-buttons",children:[(0,p.jsx)("button",{className:"btn accept-btn",onClick:()=>t(`/pharmacy/dashboard/receptionists/edit/${e._id}`),children:"Edit"}),(0,p.jsx)("button",{className:"btn user-btn",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this receptionist?"))try{await d.A.delete(`/pharmacyReceptionist/delete/${e}`,{headers:{authorization:`Bearer ${localStorage.getItem("token")}`}}),c.oR.success("Receptionist deleted successfully"),o()}catch(r){var a,s;c.oR.error((null===(a=r.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to delete receptionist")}})(e._id),children:"Delete"})]})]},e._id)}))})]})}):(0,p.jsx)("p",{children:"No receptionists data found"})]})};s(2197);d.A.defaults.baseURL="http://127.0.0.1:3000/api";const j=()=>{const[e,a]=(0,r.useState)({firstname:"",lastname:"",email:"",password:"",mobile:""}),[s,t]=(0,r.useState)(!1),i=(0,h.Zp)(),n=s=>{a({...e,[s.target.name]:s.target.value})};return(0,p.jsxs)("div",{className:"add-receptionist-container",children:[(0,p.jsx)("h2",{children:"Add New Pharmacy Receptionist"}),(0,p.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),t(!0);try{(await d.A.post("/pharmacyReceptionist/add-receptionist",e,{headers:{authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&(c.Ay.success("Pharmacy receptionist added successfully"),i("/pharmacy/dashboard/receptionists"))}catch(o){var s,r,n;c.Ay.error((null===(s=o.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Error adding pharmacy receptionist"),console.error("Add error:",(null===(n=o.response)||void 0===n?void 0:n.data)||o.message)}finally{t(!1)}},children:[(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"First Name"}),(0,p.jsx)("input",{type:"text",name:"firstname",value:e.firstname,onChange:n,required:!0,minLength:2})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Last Name"}),(0,p.jsx)("input",{type:"text",name:"lastname",value:e.lastname,onChange:n,required:!0,minLength:2})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Email"}),(0,p.jsx)("input",{type:"email",name:"email",value:e.email,onChange:n,required:!0})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Password"}),(0,p.jsx)("input",{type:"password",name:"password",value:e.password,onChange:n,required:!0,minLength:5})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Mobile Number"}),(0,p.jsx)("input",{type:"tel",name:"mobile",value:e.mobile,onChange:n,pattern:"[0-9]{10}",title:"10 digit phone number"})]}),(0,p.jsx)("button",{type:"submit",className:"btn",disabled:s,children:s?"Adding...":"Add Pharmacy Receptionist"})]})]})};s(9889);d.A.defaults.baseURL="http://127.0.0.1:3000/api";const g=()=>{const{id:e}=(0,h.g)(),a=(0,h.Zp)(),[s,t]=(0,r.useState)({firstname:"",lastname:"",email:"",mobile:"",age:"",gender:""}),[i,n]=(0,r.useState)(!0);(0,r.useEffect)((()=>{(async()=>{try{const n=await d.A.get(`/pharmacyReceptionist/receptionist/${e}`,{headers:{authorization:`Bearer ${localStorage.getItem("token")}`}});if(n.data.success){var a,s,r,i,o,l;const e=n.data.data;t({firstname:(null===(a=e.userId)||void 0===a?void 0:a.firstname)||"",lastname:(null===(s=e.userId)||void 0===s?void 0:s.lastname)||"",email:(null===(r=e.userId)||void 0===r?void 0:r.email)||"",mobile:(null===(i=e.userId)||void 0===i?void 0:i.mobile)||"",age:(null===(o=e.userId)||void 0===o?void 0:o.age)||"",gender:(null===(l=e.userId)||void 0===l?void 0:l.gender)||""})}}catch(u){var h,m;c.Ay.error((null===(h=u.response)||void 0===h||null===(m=h.data)||void 0===m?void 0:m.message)||"Error fetching receptionist details"),console.error("Fetch error:",u)}finally{n(!1)}})()}),[e]);const o=e=>{t({...s,[e.target.name]:e.target.value})};return(0,p.jsxs)("div",{className:"update-receptionist-container",children:[(0,p.jsx)("h2",{children:"Update Pharmacy Receptionist"}),i?(0,p.jsx)("div",{className:"loading-spinner",children:"Loading..."}):(0,p.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{(await d.A.put(`/pharmacyReceptionist/update/${e}`,s,{headers:{authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&(c.Ay.success("Pharmacy receptionist updated successfully"),a("/pharmacy/dashboard/receptionists"))}catch(n){var t,i;c.Ay.error((null===(t=n.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Error updating receptionist"),console.error("Update error:",n)}},children:[(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"First Name"}),(0,p.jsx)("input",{type:"text",name:"firstname",value:s.firstname,onChange:o,required:!0,minLength:2})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Last Name"}),(0,p.jsx)("input",{type:"text",name:"lastname",value:s.lastname,onChange:o,required:!0,minLength:2})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Email"}),(0,p.jsx)("input",{type:"email",name:"email",value:s.email,onChange:o,required:!0,disabled:!0})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Mobile Number"}),(0,p.jsx)("input",{type:"tel",name:"mobile",value:s.mobile,onChange:o,pattern:"[0-9]{10}",title:"10 digit phone number"})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Age"}),(0,p.jsx)("input",{type:"number",name:"age",value:s.age,onChange:o,min:"18",max:"100"})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Gender"}),(0,p.jsxs)("select",{name:"gender",value:s.gender,onChange:o,required:!0,children:[(0,p.jsx)("option",{value:"",children:"Select Gender"}),(0,p.jsx)("option",{value:"male",children:"Male"}),(0,p.jsx)("option",{value:"female",children:"Female"}),(0,p.jsx)("option",{value:"other",children:"Other"}),(0,p.jsx)("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),(0,p.jsx)("div",{className:"form-actions",children:(0,p.jsx)("button",{type:"submit",className:"btn update-btn",children:"Update Receptionist"})})]})]})};var v=s(6058),y=s(7304),b=s(7784);(0,b.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const f=(0,b.A)("pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),N=(0,b.A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var k=s(1680),A=s(7118),C=s(8706);const w=(0,b.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),S=(0,b.A)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),I=(0,b.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var z=s(1884);const M=(0,b.A)("package-search",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),R=(0,b.A)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var q=s(6873),P=s(8326),F=s(7104);y.t1.register(y.PP,y.kc,y.E8,y.Bs,y.hE,y.m_,y.s$);const L=()=>{const e=(0,h.Zp)(),[a,s]=(0,r.useState)(null),[t,i]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null);console.log("Component rendering - Current state:",{pharmacyId:a,medicines:t.length,orders:n.length,loading:l,error:m});k.A,A.A,C.A;if((0,r.useEffect)((()=>{(async()=>{console.log("Starting to fetch pharmacy ID");try{var e;const a=localStorage.getItem("token");if(!a)throw new Error("No token found in localStorage");console.log("Making request to /pharmacy/my-pharmacy");const r=await d.A.get("/pharmacy/my-pharmacy",{headers:{authorization:`Bearer ${a}`}});if(console.log("Pharmacy ID response:",r.data),null===(e=r.data)||void 0===e||!e.pharmacyId)throw new Error("Invalid pharmacy ID received");s(r.data.pharmacyId),console.log("Successfully set pharmacyId:",r.data.pharmacyId)}catch(t){var a,r;const e=(null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||t.message||"Failed to fetch pharmacy data";console.error("Error fetching pharmacy ID:",t),u(e),c(!1)}})()}),[]),(0,r.useEffect)((()=>{if(!a)return void console.log("pharmacyId not available yet, skipping data fetch");(async()=>{console.log("Starting to fetch medicines and orders with pharmacyId:",a),c(!0),u(null);try{var e,s;const r=localStorage.getItem("token");if(!r)throw new Error("No token found in localStorage");const t={authorization:`Bearer ${r}`};console.log("Making request to /medicine/all/"+a);const n=await d.A.get(`/medicine/all/${a}`,{headers:t});console.log("Medicines response:",n.data),i(Array.isArray(null===(e=n.data)||void 0===e?void 0:e.data)?n.data.data:[]),console.log("Making request to /order/all");const l=await d.A.get("/order/all",{headers:t});console.log("Orders response:",l.data),o(Array.isArray(null===(s=l.data)||void 0===s?void 0:s.orders)?l.data.orders:[]),c(!1),console.log("Data fetching completed successfully")}catch(n){var r,t;const e=(null===(r=n.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||n.message||"Failed to fetch data";console.error("Error fetching data:",n),u(e),c(!1)}})()}),[a]),l)return console.log("Rendering loading state"),(0,p.jsxs)("div",{className:"loading-container",children:[(0,p.jsx)("div",{className:"loading-spinner"}),(0,p.jsx)("p",{children:"Loading dashboard data..."}),(0,p.jsx)("p",{className:"loading-details",children:a?"Fetching medicines and orders...":"Fetching pharmacy information..."})]});if(m)return console.log("Rendering error state:",m),(0,p.jsxs)("div",{className:"error-container",children:[(0,p.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,p.jsx)("h3",{children:"Error Loading Dashboard"}),(0,p.jsx)("p",{children:m}),(0,p.jsx)("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Retry"})]});console.log("Rendering dashboard with data:",{medicinesCount:t.length,ordersCount:n.length});const x=t.length,j=t.filter((e=>e.quantity<10)).length,g=n.reduce(((e,a)=>e+(a.totalAmount||0)),0),y=n.filter((e=>"processing"===e.status||"shipped"===e.status)).length,b=[{title:"Total Medicines",value:x,icon:(0,p.jsx)(f,{size:24}),iconBg:"#e0e7ff",iconColor:"#4f46e5",barColor:"#4f46e5",link:"/pharmacy/dashboard/medicines",increase:12,period:"vs last month"},{title:"Active Orders",value:y,icon:(0,p.jsx)(N,{size:24}),iconBg:"#dbeafe",iconColor:"#3b82f6",barColor:"#3b82f6",link:"/pharmacy/dashboard/orders",increase:8,period:"vs last week"},{title:"Low Stock Items",value:j,icon:(0,p.jsx)(w,{size:24}),iconBg:"#fee2e2",iconColor:"#ef4444",barColor:"#ef4444",link:"/pharmacy/dashboard/medicines",increase:5,period:"need attention",alert:!0},{title:"Total Revenue",value:`Rs. ${g.toLocaleString()}/-`,icon:(0,p.jsx)(S,{size:24}),iconBg:"#f3e8ff",iconColor:"#9333ea",barColor:"#9333ea",link:"/pharmacy/dashboard",increase:18,period:"this month"}],L=(()=>{const e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=(new Date).getMonth(),s=[];for(let i=5;i>=0;i--){const r=(a-i+12)%12;s.push(e[r])}const r=s.map((a=>n.reduce(((s,r)=>{const t=new Date(r.createdAt||r.date||new Date);return e[t.getMonth()]===a?s+(r.totalAmount||0):s}),0))),t=Math.max(...r,1e3);return{labels:s,datasets:[{label:"Sales (Rs.)",data:r,backgroundColor:["rgba(37, 99, 235, 0.8)","rgba(37, 99, 235, 0.7)","rgba(37, 99, 235, 0.6)","rgba(37, 99, 235, 0.5)","rgba(37, 99, 235, 0.4)","rgba(37, 99, 235, 0.3)"],borderColor:"rgba(37, 99, 235, 1)",borderWidth:1,borderRadius:6,maxBarThickness:32}],maxValue:t,stepSize:t<=1e3?100:t<=5e3?500:t<=1e4?1e3:Math.ceil(t/5)}})(),$={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:12},cornerRadius:6,displayColors:!1,callbacks:{label:function(e){return`Rs. ${e.raw.toLocaleString()}`}}}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(229, 231, 235, 0.5)"},ticks:{font:{size:11},color:"rgba(107, 114, 128, 1)",callback:e=>`Rs. ${e.toLocaleString()}`,stepSize:L.stepSize,max:Math.ceil(1.1*L.maxValue)}},x:{grid:{display:!1},ticks:{font:{size:11},color:"rgba(107, 114, 128, 1)"}}}},E=(()=>{const e=n.reduce(((e,a)=>(e[a.status]=(e[a.status]||0)+1,e)),{});return{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:["rgba(37, 99, 235, 0.8)","rgba(16, 185, 129, 0.8)","rgba(59, 130, 246, 0.8)","rgba(249, 115, 22, 0.8)","rgba(139, 92, 246, 0.8)"],borderColor:["rgba(37, 99, 235, 1)","rgba(16, 185, 129, 1)","rgba(59, 130, 246, 1)","rgba(249, 115, 22, 1)","rgba(139, 92, 246, 1)"],borderWidth:1}]}})(),D=t.filter((e=>e.quantity<10)).slice(0,4).map((e=>({id:e._id,name:e.name,quantity:e.quantity,reorderPoint:10,time:e.quantity<5?"Critical stock level":e.quantity<8?"1 week until stockout":"Order soon",icon:(0,p.jsx)(w,{size:20}),iconBg:e.quantity<5?"#fee2e2":"#fff7ed",iconColor:e.quantity<5?"#ef4444":"#f97316"}))),O=[{href:"/pharmacy/dashboard/medicines/add",label:"Add New Medicine",icon:(0,p.jsx)(I,{size:20}),bgColor:"#eef2ff",textColor:"#4338ca",borderColor:"#e0e7ff"},{href:"/pharmacy/dashboard/receptionists/add",label:"Add Receptionist",icon:(0,p.jsx)(z.A,{size:20}),bgColor:"#dbeafe",textColor:"#1e40af",borderColor:"#bfdbfe"},{href:"/pharmacy/dashboard/medicines",label:"Check Inventory",icon:(0,p.jsx)(M,{size:20}),bgColor:"#dbeafe",textColor:"#1e40af",borderColor:"#bfdbfe"},{href:"/pharmacy/dashboard/orders",label:"Process Orders",icon:(0,p.jsx)(R,{size:20}),bgColor:"#ecfdf5",textColor:"#047857",borderColor:"#d1fae5"},{href:"/pharmacy/dashboard/prescriptions",label:"Check Prescriptions",icon:(0,p.jsx)(k.A,{size:20}),bgColor:"#fffbeb",textColor:"#b45309",borderColor:"#fef3c7"},{href:"/pharmacy/dashboard/receptionists",label:"Manage Receptionist",icon:(0,p.jsx)(q.A,{size:20}),bgColor:"#fffbeb",textColor:"#b45309",borderColor:"#fef3c7"}];return(0,p.jsxs)("div",{className:"admin-layout",children:[(0,p.jsx)("header",{className:"header",children:(0,p.jsx)("div",{className:"header-container"})}),(0,p.jsxs)("main",{className:"main-content",children:[(0,p.jsxs)("div",{className:"dashboard-header",children:[(0,p.jsx)("h1",{className:"dashboard-title",children:"Pharmacy Dashboard"}),(0,p.jsx)("p",{className:"dashboard-subtitle",children:"Welcome back to your pharmacy admin dashboard"})]}),(0,p.jsx)("div",{className:"stats-grid",children:b.map(((e,a)=>(0,p.jsxs)("a",{href:e.link,className:"stat-card animate-fade-in "+(e.alert?"alert":""),children:[(0,p.jsxs)("div",{className:"stat-header",children:[(0,p.jsx)("div",{className:"stat-icon",style:{backgroundColor:e.iconBg,color:e.iconColor},children:e.icon}),(0,p.jsx)(P.A,{size:20,style:{color:e.iconColor}})]}),(0,p.jsxs)("div",{className:"stat-content",children:[(0,p.jsx)("p",{className:"stat-title",children:e.title}),(0,p.jsxs)("div",{className:"stat-value",children:[e.value,(0,p.jsxs)("span",{className:"stat-increase",children:["+",e.increase,"%"]})]}),(0,p.jsx)("p",{className:"stat-period",children:e.period})]}),(0,p.jsx)("div",{className:"stat-bar",style:{backgroundColor:e.barColor}})]},a)))}),(0,p.jsxs)("div",{className:"charts-grid",children:[(0,p.jsxs)("div",{className:"chart-card animate-slide-up",children:[(0,p.jsxs)("div",{className:"chart-header",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{className:"chart-title",children:"Monthly Sales"}),(0,p.jsx)("p",{className:"chart-subtitle",children:"Last 6 months revenue"})]}),(0,p.jsxs)("div",{className:"chart-actions",children:[(0,p.jsx)("button",{className:"action-button",children:(0,p.jsx)(F.A,{size:16})}),(0,p.jsxs)("button",{className:"report-button",onClick:()=>e("/pharmacy/dashboard/orders"),children:["View All ",(0,p.jsx)(P.A,{size:16})]})]})]}),(0,p.jsx)("div",{className:"chart-container",children:(0,p.jsx)(v.yP,{data:L,options:$})})]}),(0,p.jsxs)("div",{className:"chart-card animate-slide-up",children:[(0,p.jsxs)("div",{className:"chart-header",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{className:"chart-title",children:"Order Status"}),(0,p.jsx)("p",{className:"chart-subtitle",children:"Distribution by status"})]}),(0,p.jsxs)("div",{className:"chart-actions",children:[(0,p.jsx)("button",{className:"action-button",children:(0,p.jsx)(F.A,{size:16})}),(0,p.jsxs)("button",{className:"report-button",onClick:()=>e("/pharmacy/dashboard/orders"),children:["View All ",(0,p.jsx)(P.A,{size:16})]})]})]}),(0,p.jsx)("div",{className:"chart-container",children:(0,p.jsx)(v.Fq,{data:E,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:16,font:{size:12}}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:12},cornerRadius:6}},cutout:"60%"}})})]})]}),(0,p.jsxs)("div",{className:"activities-container",children:[(0,p.jsxs)("div",{className:"activities-card animate-slide-up",children:[(0,p.jsxs)("div",{className:"activities-header",children:[(0,p.jsx)("h2",{className:"activities-title",children:"Low Stock Alert"}),(0,p.jsxs)("button",{className:"view-all-button",onClick:()=>e("/pharmacy/dashboard/medicines"),children:["View All ",(0,p.jsx)(P.A,{size:16})]})]}),(0,p.jsx)("div",{className:"activities-list",children:D.map((e=>(0,p.jsxs)("div",{className:"activity-item",children:[(0,p.jsx)("div",{className:"activity-icon",style:{backgroundColor:e.iconBg,color:e.iconColor},children:e.icon}),(0,p.jsxs)("div",{className:"activity-content",children:[(0,p.jsx)("h3",{className:"activity-title",children:e.name}),(0,p.jsxs)("p",{className:"activity-description",children:["Stock: ",e.stock," (Min: ",e.reorderPoint,")"]})]}),(0,p.jsx)("div",{className:"activity-time",children:e.time})]},e.id)))})]}),(0,p.jsxs)("div",{className:"quick-actions-card animate-slide-up",children:[(0,p.jsx)("h2",{className:"quick-actions-title",children:"Quick Actions"}),(0,p.jsx)("div",{className:"quick-actions-grid",children:O.map(((e,a)=>(0,p.jsxs)("a",{href:e.href,className:"action-link",style:{backgroundColor:e.bgColor,color:e.textColor,borderColor:e.borderColor},children:[(0,p.jsx)("div",{className:"action-icon",style:{color:e.textColor},children:e.icon}),(0,p.jsx)("span",{children:e.label})]},a)))})]})]})]})]})};var $=s(7381),E=s(5369),D=s(5475),O=s(7149);s(1972);const B=()=>{const e=(0,m.wA)(),a=(0,h.Zp)(),[s,t]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),{user:o}=(0,m.d4)((e=>e.root)),l=[{name:"Home",path:"/pharmacy/dashboard",icon:(0,p.jsx)(E.rQ8,{})},{name:"Medicines",icon:(0,p.jsx)(E.I1M,{}),submenu:[{name:"View Medicines",path:"/pharmacy/dashboard/medicines",icon:(0,p.jsx)(E.Ny1,{})},{name:"Add Medicine",path:"/pharmacy/dashboard/medicines/add",icon:(0,p.jsx)(E.OiG,{})}]},{name:"Orders",path:"/pharmacy/dashboard/orders",icon:(0,p.jsx)(E.AsH,{})},{name:"Prescriptions",path:"/pharmacy/dashboard/prescriptions",icon:(0,p.jsx)(E.Wte,{})},{name:"Receptionists",icon:(0,p.jsx)(E.x$1,{}),submenu:[{name:"View Receptionists",path:"/pharmacy/dashboard/receptionists",icon:(0,p.jsx)(E.Ny1,{})},{name:"Add Receptionist",path:"/pharmacy/dashboard/receptionists/add",icon:(0,p.jsx)(E.OiG,{})}]},{name:"Reviews",path:"/pharmacy/dashboard/reviews",icon:(0,p.jsx)(E.hYw,{})},{name:"Profile",path:"/profile",icon:(0,p.jsx)(E.x$1,{})}];return(0,p.jsx)("section",{className:"sidebar-section",children:(0,p.jsxs)("div",{className:"sidebar-container",children:[(0,p.jsx)("ul",{className:"sidebar-menu",children:l.map(((e,a)=>{if(e.submenu){const o="Medicines"===e.name;return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)("li",{className:"menu-item",onClick:()=>o?t(!s):n(!i),children:(0,p.jsxs)("div",{className:"menu-link",children:[e.icon,(0,p.jsx)("span",{children:e.name}),o?s?(0,p.jsx)(O.q0c,{}):(0,p.jsx)(O.DJX,{}):i?(0,p.jsx)(O.q0c,{}):(0,p.jsx)(O.DJX,{})]})}),(o?s:i)&&(0,p.jsx)("ul",{className:"submenu",children:e.submenu.map(((e,a)=>(0,p.jsx)("li",{className:"submenu-item",children:(0,p.jsxs)(D.k2,{to:e.path,className:"submenu-link",children:[e.icon,(0,p.jsx)("span",{children:e.name})]})},a)))})]},a)}return(0,p.jsx)("li",{className:"menu-item",children:(0,p.jsxs)(D.k2,{to:e.path,className:"menu-link",children:[e.icon,(0,p.jsx)("span",{children:e.name})]})},a)}))}),(0,p.jsxs)("div",{className:"logout-container",onClick:()=>{e((0,u.iA)({})),localStorage.removeItem("token"),a("/login")},children:[(0,p.jsx)(O.EyH,{}),(0,p.jsx)("p",{children:"Logout"})]})]})})},_=e=>{const{type:a}=e;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("section",{className:"layout-section",children:(0,p.jsxs)("div",{className:"layout-container",children:[(0,p.jsx)(B,{}),""===a?(0,p.jsx)(L,{}):"medicines"===a?(0,p.jsx)(t.A,{}):"medicines/add"===a?(0,p.jsx)(i.A,{}):"medicines/edit"===a?(0,p.jsx)(n.A,{}):"orders"===a?(0,p.jsx)(o.A,{}):"prescriptions"===a?(0,p.jsx)(l.A,{}):"receptionists"===a?(0,p.jsx)(x,{}):"receptionists/add"===a?(0,p.jsx)(j,{}):"receptionists/edit"===a?(0,p.jsx)(g,{}):"reviews"===a?(0,p.jsx)($.A,{}):(0,p.jsxs)("div",{className:"dashboard-default",children:[(0,p.jsx)("h2",{children:"Pharmacy Dashboard"}),(0,p.jsx)("p",{children:"Select an option from the sidebar to get started"})]})]})})})}}}]);
//# sourceMappingURL=76.1515f0d6.chunk.js.map