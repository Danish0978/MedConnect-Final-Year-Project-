"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[799],{3799:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var i=a(5043),l=a(3781),n=a(6213),r=a(3768),t=a(4960),o=a(579);const c=e=>{let{doctor:s,onClose:a}=e;const[l,c]=(0,i.useState)({firstname:"",lastname:"",email:"",password:"",confirmPassword:"",date:"",time:""}),d=e=>{c({...l,[e.target.name]:e.target.value})};return(0,o.jsx)("div",{className:"receptionist-modal-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,o.jsxs)("div",{className:"receptionist-booking-modal",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h2",{children:"Book Appointment for Patient"}),(0,o.jsx)("button",{className:"close-btn",onClick:a,children:(0,o.jsx)(t.WQq,{size:24})})]}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.password!==l.confirmPassword)return r.Ay.error("Passwords don't match");try{var i,t,o;const e={doctorId:null===s||void 0===s||null===(i=s.userId)||void 0===i?void 0:i._id,date:l.date,time:l.time,doctorname:`${(null===s||void 0===s||null===(t=s.userId)||void 0===t?void 0:t.firstname)||""} ${(null===s||void 0===s||null===(o=s.userId)||void 0===o?void 0:o.lastname)||""}`,firstname:l.firstname,lastname:l.lastname,email:l.email,password:l.password,patientDetails:{firstname:l.firstname,lastname:l.lastname,email:l.email,password:l.password}},{data:c}=await n.A.post("/appointment/book-by-receptionist",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});r.Ay.success("Appointment booked successfully"),a()}catch(u){var c,d,m;console.error("Full error:",u),console.error("Error response:",null===(c=u.response)||void 0===c?void 0:c.data),r.Ay.error((null===(d=u.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.message)||"Booking failed. Please check all fields.")}},className:"receptionist-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"First Name"}),(0,o.jsx)("input",{type:"text",name:"firstname",value:l.firstname,onChange:d,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Last Name"}),(0,o.jsx)("input",{type:"text",name:"lastname",value:l.lastname,onChange:d,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Email"}),(0,o.jsx)("input",{type:"email",name:"email",value:l.email,onChange:d,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Password"}),(0,o.jsx)("input",{type:"password",name:"password",value:l.password,onChange:d,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Confirm Password"}),(0,o.jsx)("input",{type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:d,required:!0})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Date"}),(0,o.jsx)("input",{type:"date",name:"date",value:l.date,onChange:d,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Time"}),(0,o.jsx)("input",{type:"time",name:"time",value:l.time,onChange:d,required:!0})]})]}),(0,o.jsxs)("div",{className:"form-actions",children:[(0,o.jsx)("button",{type:"button",className:"cancel-btn",onClick:a,children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"submit-btn",children:"Book Appointment"})]})]})]})})};var d=a(7070),m=a(5369);const u=e=>{var s,a,n,t,u,v,p,h,x,j,g;let{ele:f}=e;const[N,b]=(0,i.useState)(!1),[w,y]=(0,i.useState)(localStorage.getItem("token")||""),[C,k]=(0,i.useState)(localStorage.getItem("token")?(0,d.A)(localStorage.getItem("token")):""),[A,I]=(0,i.useState)(!1),[S,P]=(0,i.useState)(!1);S?f.feedbacks:null===(s=f.feedbacks)||void 0===s||s.slice(0,2);return(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{className:"card-img-container",children:[(0,o.jsx)("div",{className:"card-img flex-center",children:(0,o.jsx)("img",{src:(null===f||void 0===f||null===(a=f.userId)||void 0===a?void 0:a.pic)||"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg",alt:"profile"})}),f.averageRating&&(0,o.jsxs)("div",{className:"rating-badge",children:[(0,o.jsx)(m.gt3,{className:"star-icon filled"}),(0,o.jsx)("span",{children:f.averageRating}),f.totalReviews>0&&(0,o.jsxs)("span",{className:"review-count",children:["(",f.totalReviews,")"]})]})]}),(0,o.jsxs)("h3",{className:"card-name",children:["Dr. ",(null===f||void 0===f||null===(n=f.userId)||void 0===n?void 0:n.firstname)+" "+(null===f||void 0===f||null===(t=f.userId)||void 0===t?void 0:t.lastname)]}),(0,o.jsxs)("p",{className:"specialization",children:[(0,o.jsx)("strong",{children:"Specialization: "}),null===f||void 0===f?void 0:f.specialization]}),(0,o.jsxs)("p",{className:"experience",children:[(0,o.jsx)("strong",{children:"Experience: "}),null===f||void 0===f?void 0:f.experience,"yrs"]}),(0,o.jsxs)("p",{className:"fees",children:[(0,o.jsx)("strong",{children:"Fees per consultation: "}),"Rs. ",null===f||void 0===f?void 0:f.feePerConsultation]}),(0,o.jsxs)("p",{className:"clinic",children:[(0,o.jsx)("strong",{children:"Clinic: "}),(null===f||void 0===f||null===(u=f.clinicId)||void 0===u?void 0:u.name)||"Not specified"]}),(0,o.jsxs)("p",{className:"clinic-address",children:[(0,o.jsx)("strong",{children:"Clinic Address: "}),(null===f||void 0===f||null===(v=f.clinicId)||void 0===v?void 0:v.address)||"Not specified"]}),(0,o.jsxs)("p",{className:"clinic",children:[(0,o.jsx)("strong",{children:"Clinic Phone: "}),(null===f||void 0===f||null===(p=f.clinicId)||void 0===p||null===(h=p.contact)||void 0===h?void 0:h.phone)||"Not specified"]}),(0,o.jsxs)("p",{className:"clinic",children:[(0,o.jsx)("strong",{children:"Clinic Email: "}),(null===f||void 0===f||null===(x=f.clinicId)||void 0===x||null===(j=x.contact)||void 0===j?void 0:j.email)||"Not specified"]}),(0,o.jsxs)("div",{className:"availability",children:[(0,o.jsx)("h4",{children:"Availability"}),Object.entries((null===f||void 0===f?void 0:f.availability)||{}).map((e=>{let[s,a]=e;return a.isAvailable?(0,o.jsx)("div",{className:"day-availability",children:(0,o.jsxs)("p",{className:"day",children:[(0,o.jsxs)("strong",{children:[s.charAt(0).toUpperCase()+s.slice(1),":"]}),(0,o.jsxs)("span",{className:"time",children:[a.startTime," - ",a.endTime]})]})},s):null}))]}),(0,o.jsx)("button",{className:"btn appointment-btn",onClick:()=>{if(""===w)return r.oR.error("You must log in first");b(!0)},children:C.isReceptionist?"Book for Patient":"Book Appointment"}),(0,o.jsx)("span",{style:{cursor:"pointer"},className:"reviews-btn",onClick:()=>{I(!A)},children:A?"Hide Details":"View Reviews"}),A&&(0,o.jsxs)("div",{className:"reviews-expanded",children:[(0,o.jsx)("h4",{children:"Patient Reviews"}),(0,o.jsx)("div",{className:"reviews-list",children:(null===(g=f.feedbacks)||void 0===g?void 0:g.length)>0?f.feedbacks.map(((e,s)=>{var a;return(0,o.jsxs)("div",{className:"review-item",children:[(0,o.jsxs)("div",{className:"review-header",children:[(0,o.jsx)("span",{className:"reviewer-name",children:(null===(a=e.patient)||void 0===a?void 0:a.firstname)||"Anonymous"}),(0,o.jsx)("div",{className:"review-rating",children:[...Array(5)].map(((s,a)=>(0,o.jsx)(m.gt3,{className:"star-icon "+(a<e.rating?"filled":"")},a)))})]}),e.comment&&(0,o.jsxs)("p",{className:"review-comment",children:['"',e.comment,'"']})]},s)})):(0,o.jsx)("p",{children:"No reviews yet."})})]}),N&&(C.isReceptionist?(0,o.jsx)(c,{doctor:f,onClose:()=>b(!1)}):(0,o.jsx)(l.A,{setModalOpen:b,doctor:f}))]})};var v=a(5560),p=a(1772),h=a(5789),x=a(8271),j=a(9456),g=a(5089),f=a(6760);const N=()=>{const[e,s]=(0,i.useState)([]),[a,l]=(0,i.useState)([]),[n,t]=(0,i.useState)(""),[c,d]=(0,i.useState)(null),N=(0,j.wA)(),{loading:b}=(0,j.d4)((e=>e.root));return(0,i.useEffect)((()=>{(async()=>{N((0,g.r1)(!0));try{const e=await(0,h.A)("/doctor/getalldoctors");e&&e.success&&Array.isArray(e.data)?(s(e.data),l(e.data)):(console.error("Invalid data format:",e),r.oR.error("Failed to fetch doctors: Invalid data format"))}catch(e){console.error("Error fetching doctors:",e),r.oR.error("Failed to fetch doctors")}finally{N((0,g.r1)(!1))}})()}),[]),(0,i.useEffect)((()=>{let s=[...e];if(n){const e=n.toLowerCase();s=s.filter((s=>{var a,i,l,n,r,t,o,c,d;const m=`${(null===(a=s.userId)||void 0===a?void 0:a.firstname)||""} ${(null===(i=s.userId)||void 0===i?void 0:i.lastname)||""}`.toLowerCase(),u=(null===(l=s.specialization)||void 0===l?void 0:l.toLowerCase())||"",v=(null===(n=s.clinicId)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.toLowerCase())||"",p=(null===(t=s.clinicId)||void 0===t||null===(o=t.address)||void 0===o?void 0:o.toLowerCase())||"",h=(null===(c=s.feePerConsultation)||void 0===c?void 0:c.toString())||"",x=(null===(d=s.experience)||void 0===d?void 0:d.toString())||"";return m.includes(e)||u.includes(e)||v.includes(e)||p.includes(e)||h.includes(e)||x.includes(e)}))}null!==c&&(s=s.filter((e=>parseFloat(e.averageRating||0)>=c))),l(s)}),[n,c,e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.A,{}),b&&(0,o.jsx)(x.A,{}),!b&&(0,o.jsxs)("section",{className:"container doctors",children:[(0,o.jsx)("h2",{className:"page-heading",children:"Our Doctors"}),(0,o.jsxs)("div",{className:"search-and-filter",children:[(0,o.jsx)("div",{className:"doctor-search-container",children:(0,o.jsxs)("div",{className:"doctor-search-bar",children:[(0,o.jsx)(m.KSO,{className:"search-icon"}),(0,o.jsx)("input",{type:"text",placeholder:"Search by name, specialization, clinic, etc...",value:n,onChange:e=>t(e.target.value)})]})}),(0,o.jsxs)("div",{className:"rating-filter",children:[(0,o.jsx)("span",{children:"Filter by rating: "}),[4,3,2,1].map((e=>(0,o.jsxs)("button",{className:"rating-btn "+(c===e?"active":""),onClick:()=>d(c===e?null:e),children:[e,"+ ",(0,o.jsx)(m.gt3,{className:"star-icon"})]},e))),c&&(0,o.jsx)("button",{className:"clear-filter",onClick:()=>d(null),children:"Clear"})]})]}),a.length>0?(0,o.jsx)("div",{className:"doctors-card-container",children:a.map((e=>(0,o.jsx)(u,{ele:e},e._id)))}):(0,o.jsx)(f.A,{})]}),(0,o.jsx)(v.A,{})]})}}}]);
//# sourceMappingURL=799.e5791734.chunk.js.map