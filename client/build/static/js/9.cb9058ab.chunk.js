/*! For license information please see 9.cb9058ab.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9],{528:(e,a,s)=>{s.d(a,{A:()=>u});var t=s(5043),i=s(6213),n=s(3768),r=s(8271),o=s(5089),l=s(9456),d=s(6760),c=s(5789),h=(s(8067),s(7070)),m=s(579);i.A.defaults.baseURL="http://127.0.0.1:3000/api";const u=()=>{const[e,a]=(0,t.useState)([]),s=(0,l.wA)(),{loading:u}=(0,l.d4)((e=>e.root)),[p,v]=(0,t.useState)(localStorage.getItem("token")||""),[x,j]=(0,t.useState)(localStorage.getItem("token")?(0,h.A)(localStorage.getItem("token")):""),g=async()=>{try{s((0,o.r1)(!0));const e=localStorage.getItem("token"),t=null!==x&&void 0!==x&&x.isSuperAdmin?"/appointment/superadmin/all":"/appointment/getallappointments",i=await(0,c.A)(t,{headers:{Authorization:`Bearer ${e}`}});a(i),s((0,o.r1)(!1))}catch(e){n.Ay.error("Failed to fetch appointments"),console.error("Fetch error:",e),s((0,o.r1)(!1))}};return(0,t.useEffect)((()=>{g()}),[null===x||void 0===x?void 0:x.isSuperAdmin]),(0,m.jsx)(m.Fragment,{children:u?(0,m.jsx)(r.A,{}):(0,m.jsxs)("section",{className:"user-section",children:[(0,m.jsx)("h3",{className:"home-sub-heading",children:null!==x&&void 0!==x&&x.isSuperAdmin?"All Appointments":"Clinic Appointments"}),e.length>0?(0,m.jsx)("div",{className:"user-container",children:(0,m.jsxs)("table",{children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"S.No"}),(0,m.jsx)("th",{children:"Doctor"}),(0,m.jsx)("th",{children:"Patient"}),(0,m.jsx)("th",{children:"Appointment Date"}),(0,m.jsx)("th",{children:"Time"}),(0,m.jsx)("th",{children:"Booked On"}),(0,m.jsx)("th",{children:"Status"}),(0,m.jsx)("th",{children:"Action"})]})}),(0,m.jsx)("tbody",{children:e.map(((e,a)=>{var s,t,r,o;return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:a+1}),(0,m.jsxs)("td",{children:[null===e||void 0===e||null===(s=e.doctorId)||void 0===s?void 0:s.firstname," ",null===e||void 0===e||null===(t=e.doctorId)||void 0===t?void 0:t.lastname]}),(0,m.jsxs)("td",{children:[null===e||void 0===e||null===(r=e.userId)||void 0===r?void 0:r.firstname," ",null===e||void 0===e||null===(o=e.userId)||void 0===o?void 0:o.lastname]}),(0,m.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,m.jsx)("td",{children:e.time}),(0,m.jsx)("td",{children:new Date(e.createdAt).toLocaleString()}),(0,m.jsx)("td",{children:e.status}),(0,m.jsx)("td",{children:(0,m.jsx)("button",{className:"btn "+("Completed"===e.status?"disable-btn":"accept-btn"),disabled:"Completed"===e.status,onClick:()=>(async e=>{try{var a,s;await n.Ay.promise(i.A.put("/appointment/completed",{appointid:null===e||void 0===e?void 0:e._id,doctorId:null===e||void 0===e?void 0:e.doctorId._id,doctorname:`${null===e||void 0===e||null===(a=e.userId)||void 0===a?void 0:a.firstname} ${null===e||void 0===e||null===(s=e.userId)||void 0===s?void 0:s.lastname}`},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),{success:"Appointment marked as completed",error:"Failed to complete appointment",loading:"Updating appointment..."}),g()}catch(t){console.error("Completion error:",t)}})(e),children:"Completed"===e.status?"Completed":"Complete"})})]},e._id)}))})]})}):(0,m.jsx)(d.A,{})]})})}},1972:()=>{},4009:(e,a,s)=>{s.r(a),s.d(a,{default:()=>O});var t=s(5043),i=s(5369),n=s(7149),r=s(3216),o=s(5475),l=s(9456),d=s(5089),c=(s(1972),s(579));const h=()=>{const e=(0,l.wA)(),a=(0,r.Zp)(),s=[{name:"Dashboard",path:"/admin/dashboard",icon:(0,c.jsx)(i.rQ8,{})},{name:"Users",path:"/admin/dashboard/users",icon:(0,c.jsx)(i.YXz,{})},{name:"Doctors",path:"/admin/dashboard/doctors",icon:(0,c.jsx)(i.ifA,{})},{name:"Pharmacy Owners",path:"/admin/dashboard/pharmacies-owners",icon:(0,c.jsx)(i.I1M,{})},{name:"Clinic Owners",path:"/admin/dashboard/clinics-owners",icon:(0,c.jsx)(i.ISI,{})},{name:"Orders",path:"/admin/dashboard/orders",icon:(0,c.jsx)(i.AsH,{})},{name:"Appointments",path:"/admin/dashboard/appointments",icon:(0,c.jsx)(i.AsH,{})},{name:"Transactions",path:"/admin/dashboard/transactions",icon:(0,c.jsx)(i.t69,{})}];return(0,c.jsx)("section",{className:"sidebar-section",children:(0,c.jsxs)("div",{className:"sidebar-container",children:[(0,c.jsx)("ul",{className:"sidebar-menu",children:s.map(((e,a)=>(0,c.jsx)("li",{className:"menu-item",children:(0,c.jsxs)(o.k2,{to:e.path,className:e=>{let{isActive:a}=e;return a?"menu-link active":"menu-link"},children:[e.icon,(0,c.jsx)("span",{children:e.name})]})},a)))}),(0,c.jsxs)("div",{className:"logout-container",onClick:()=>{e((0,d.iA)({})),localStorage.removeItem("token"),a("/login")},children:[(0,c.jsx)(n.EyH,{}),(0,c.jsx)("p",{children:"Logout"})]})]})})};var m=s(5621),u=s(528),p=s(6213),v=s(3768),x=s(8271),j=s(6760);s(8067);const g=()=>{const[e,a]=(0,t.useState)([]),s=(0,l.wA)(),{loading:i}=(0,l.d4)((e=>e.root)),n=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=new Date(e),t=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");if(a)return`${t}-${i}-${n} ${a}`;return`${t}-${i}-${n} ${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}`};return(0,t.useEffect)((()=>{(async()=>{try{s((0,d.r1)(!0));const{data:e}=await p.A.get("/payment/transactions",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a(e.data),s((0,d.r1)(!1))}catch(i){var e,t;v.Ay.error((null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to fetch transactions"),s((0,d.r1)(!1))}})()}),[]),(0,c.jsx)(c.Fragment,{children:i?(0,c.jsx)(x.A,{}):(0,c.jsxs)("section",{className:"user-section",children:[(0,c.jsx)("h3",{className:"home-sub-heading",children:"All Transactions"}),e.length>0?(0,c.jsx)("div",{className:"user-container",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"S.No"}),(0,c.jsx)("th",{children:"Transaction ID"}),(0,c.jsx)("th",{children:"Patient"}),(0,c.jsx)("th",{children:"Patient Email"}),(0,c.jsx)("th",{children:"Doctor"}),(0,c.jsx)("th",{children:"Specialization"}),(0,c.jsx)("th",{children:"Amount"}),(0,c.jsx)("th",{children:"Appointment Date"}),(0,c.jsx)("th",{children:"Payment Date"}),(0,c.jsx)("th",{children:"Status"})]})}),(0,c.jsx)("tbody",{children:null===e||void 0===e?void 0:e.map(((e,a)=>{var s,t,i,r,o;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:a+1}),(0,c.jsx)("td",{className:"transaction-id",children:(0,c.jsx)("code",{children:null===e||void 0===e?void 0:e.transactionId})}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(s=e.patientInfo)||void 0===s?void 0:s.name)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(t=e.patientInfo)||void 0===t?void 0:t.email)&&(0,c.jsx)("div",{className:"patient-email",children:e.patientInfo.email})}),(0,c.jsx)("td",{children:null!==e&&void 0!==e&&null!==(i=e.doctorInfo)&&void 0!==i&&i.name?`Dr. ${e.doctorInfo.name}`:"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(r=e.doctorInfo)||void 0===r?void 0:r.specialization)||"N/A"}),(0,c.jsxs)("td",{children:["Rs. ",null===e||void 0===e?void 0:e.amount]}),(0,c.jsxs)("td",{children:[null===e||void 0===e?void 0:e.date," ",null===e||void 0===e?void 0:e.time]}),(0,c.jsx)("td",{children:n(null===e||void 0===e?void 0:e.createdAt)}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"status-badge "+("completed"===(null===e||void 0===e?void 0:e.status)?"completed":"failed"),children:(null===e||void 0===e||null===(o=e.status)||void 0===o?void 0:o.toUpperCase())||"N/A"})})]},null===e||void 0===e?void 0:e._id)}))})]})}):(0,c.jsx)(j.A,{})]})})};var b=s(5789);p.A.defaults.baseURL="http://127.0.0.1:3000/api";const f=e=>{let{userType:a}=e;const[s,i]=(0,t.useState)([]),n=(0,l.wA)(),o=(0,r.Zp)(),{loading:h}=(0,l.d4)((e=>e.root)),m=!["doctors","pharmacies-owners","clinics-owners"].includes(a),u=async()=>{try{n((0,d.r1)(!0));let e="/user/getallusers";switch(a){case"doctors":e="/user/getalldoctors";break;case"pharmacies-owners":e="/user/getallpharmacyowners";break;case"clinics-owners":e="/user/getallclinicowners";break;case"regular":e="/user/getallregularusers";break;default:e="/user/getallusers"}const s=await(0,b.A)(e);i(s),n((0,d.r1)(!1))}catch(e){console.log("Error fetching users: ",e),n((0,d.r1)(!1))}};(0,t.useEffect)((()=>{u()}),[a]);return(0,c.jsx)(c.Fragment,{children:h?(0,c.jsx)(x.A,{}):(0,c.jsxs)("section",{className:"user-section",children:[(0,c.jsx)("h3",{className:"home-sub-heading",children:(()=>{switch(a){case"doctors":return"All Doctors";case"pharmacies-owners":return"All Pharmacy Owners";case"clinics-owners":return"All Clinic Owners";case"regular":return"All Regular Users";default:return"All Users"}})()}),s.length>0?(0,c.jsx)("div",{className:"user-container",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"S.No"}),(0,c.jsx)("th",{children:"Pic"}),(0,c.jsx)("th",{children:"First Name"}),(0,c.jsx)("th",{children:"Last Name"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Mobile No."}),(0,c.jsx)("th",{children:"Age"}),(0,c.jsx)("th",{children:"Gender"}),m&&(0,c.jsx)("th",{children:"Admin"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:null===s||void 0===s?void 0:s.map(((e,a)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:a+1}),(0,c.jsx)("td",{children:(0,c.jsx)("img",{className:"user-table-pic",src:null===e||void 0===e?void 0:e.pic,alt:null===e||void 0===e?void 0:e.firstname})}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.firstname}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.lastname}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.email}),(0,c.jsx)("td",{children:(null===e||void 0===e?void 0:e.mobile)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e?void 0:e.age)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e?void 0:e.gender)||"N/A"}),m&&(0,c.jsx)("td",{children:null!==e&&void 0!==e&&e.isAdmin?"Yes":"No"}),(0,c.jsxs)("td",{className:"user-actions",children:[(0,c.jsxs)("button",{className:"user-action-edit",onClick:()=>o(`/admin/update-user/${null===e||void 0===e?void 0:e._id}`),children:[(0,c.jsx)("i",{className:"fas fa-edit"})," Edit"]}),m&&(0,c.jsxs)("button",{className:null!==e&&void 0!==e&&e.isAdmin?"user-action-demote":"user-action-promote",onClick:()=>(async(e,a)=>{try{const s=a?"remove":"add";await v.Ay.promise(p.A.put("/user/toggleadmin",{userId:e,action:s},{headers:{authorization:`Bearer ${localStorage.getItem("token")}`}}),{pending:"Updating admin status...",success:`Admin status ${a?"removed":"added"} successfully`,error:"Unable to update admin status"}),u()}catch(s){console.error("Error toggling admin status: ",s)}})(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.isAdmin),children:[(0,c.jsx)("i",{className:null!==e&&void 0!==e&&e.isAdmin?"fas fa-user-minus":"fas fa-user-plus"}),null!==e&&void 0!==e&&e.isAdmin?"Remove Admin":"Make Admin"]}),(0,c.jsxs)("button",{className:"user-action-delete",onClick:()=>(async e=>{try{window.confirm("Are you sure you want to delete?")&&(await v.Ay.promise(p.A.delete("/user/deleteuser",{headers:{authorization:`Bearer ${localStorage.getItem("token")}`},data:{userId:e}}),{pending:"Deleting...",success:"User deleted successfully",error:"Unable to delete user"}),u())}catch(a){console.error("Error deleting user: ",a)}})(null===e||void 0===e?void 0:e._id),children:[(0,c.jsx)("i",{className:"fas fa-trash-alt"})," Delete"]})]})]},null===e||void 0===e?void 0:e._id)))})]})}):(0,c.jsx)(j.A,{})]})})};var y=s(6058),A=s(7304),N=s(8706),w=s(8800),C=s(7118),k=s(6873),S=s(1680),I=s(8646),z=s(8326),$=s(7104),D=(s(7636),s(7070));p.A.defaults.baseURL="http://127.0.0.1:3000/api",A.t1.register(A.PP,A.kc,A.E8,A.Bs,A.hE,A.m_,A.s$);const M=()=>{var e,a,s,i;const n=(0,r.Zp)(),[o,l]=(0,t.useState)(localStorage.getItem("token")||""),[d,h]=(0,t.useState)(localStorage.getItem("token")?(0,D.A)(localStorage.getItem("token")):""),[m,u]=(0,t.useState)({totalDoctors:0,activeAppointments:0,pendingApplications:0,receptionists:0,loading:!0,error:null}),[v,x]=(0,t.useState)({appointments:null,specializations:null,loading:!0}),[j,g]=(0,t.useState)([]),[b,f]=(0,t.useState)(!0),A=e=>{const a=new Date,s=new Date(e),t=Math.floor((a-s)/36e5);if(t<1){const e=Math.floor((a-s)/6e4);return`${e} minute${1!==e?"s":""} ago`}if(t<24)return`${t} hour${1!==t?"s":""} ago`;{const e=Math.floor(t/24);return`${e} day${1!==e?"s":""} ago`}};(0,t.useEffect)((()=>{(async()=>{try{var e,a,s,t,i,n,r;const d=localStorage.getItem("token");if(!d)throw new Error("No authentication token found");const h={headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}},[m,v,j,b]=await Promise.all([p.A.get("/doctor/getalldoctors",h),p.A.get("/appointment/superadmin/all",h),p.A.get("/user/getallclinicowners",h),p.A.get("/user/getallpharmacyowners",h)]);console.log("API Responses:",{doctors:m.data,appointments:v.data,clinicOwners:(null===(e=j.data)||void 0===e?void 0:e.length)||0,pharmacyOwners:(null===(a=b.data)||void 0===a?void 0:a.length)||0}),u({totalDoctors:(null===(s=m.data.data)||void 0===s?void 0:s.length)||0,activeAppointments:Array.isArray(v.data)?v.data.filter((e=>e.status&&"pending"===e.status.toLowerCase())).length:0,clinicOwners:(null===(t=j.data)||void 0===t?void 0:t.length)||0,pharmacyOwners:(null===(i=b.data)||void 0===i?void 0:i.length)||0,loading:!1,error:null});const y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=(new Date).getMonth(),k=Array.from({length:6},((e,a)=>y[(C-5+a+12)%12])),S=Array(6).fill(0);Array.isArray(v.data)&&v.data.forEach((e=>{const a=new Date(e.date||e.createdAt),s=(C-a.getMonth()+12)%12;s<6&&S[5-s]++}));const I={};Array.isArray(null===(n=m.data)||void 0===n?void 0:n.data)&&m.data.data.forEach((e=>{const a=e.specialization||"General";I[a]=(I[a]||0)+1})),x({appointments:{labels:k,data:S},specializations:{labels:Object.keys(I),data:Object.values(I)},loading:!1});const z=[];if(Array.isArray(null===(r=m.data)||void 0===r?void 0:r.data)&&m.data.data.length>0){var o,l;const e=m.data.data[m.data.data.length-1];z.push({id:`doctor-${e._id}`,title:"New Doctor Joined",description:`Dr. ${null===(o=e.userId)||void 0===o?void 0:o.firstname} ${null===(l=e.userId)||void 0===l?void 0:l.lastname} (${e.specialization||"General"})`,time:A(e.createdAt),icon:(0,c.jsx)(N.A,{size:20}),iconBg:"#e0e7ff",iconColor:"#4f46e5"})}if(Array.isArray(v.data)&&v.data.length>0){v.data.slice(-3).reverse().forEach((e=>{var a,s;z.push({id:`appt-${e._id}`,title:"Appointment Scheduled",description:`With Dr. ${null===(a=e.doctorId)||void 0===a?void 0:a.firstname} ${null===(s=e.doctorId)||void 0===s?void 0:s.lastname} at ${e.time}`,time:A(e.createdAt),icon:(0,c.jsx)(w.A,{size:20}),iconBg:"#dbeafe",iconColor:"#3b82f6"})}))}g(Array.isArray(z)?z.sort(((e,a)=>new Date(a.time)-new Date(e.time))).slice(0,5):[]),f(!1)}catch(m){var d,h;console.error("Error fetching data:",m);const e=(null===(d=m.response)||void 0===d||null===(h=d.data)||void 0===h?void 0:h.message)||m.message||"Failed to fetch data";u((a=>({...a,loading:!1,error:e}))),x((e=>({...e,loading:!1}))),f(!1)}})()}),[]);const M=[{title:"Total Doctors",value:m.loading?"...":(m.totalDoctors||0).toString(),icon:(0,c.jsx)(N.A,{size:24}),iconBg:"#e0e7ff",iconColor:"#4f46e5",barColor:"#4f46e5",link:"/admin/dashboard/doctors",increase:8,period:"vs last month"},{title:"Active Appointments",value:m.loading?"...":(m.activeAppointments||0).toString(),icon:(0,c.jsx)(w.A,{size:24}),iconBg:"#dbeafe",iconColor:"#3b82f6",barColor:"#3b82f6",link:"/admin/dashboard/appointments",increase:12,period:"vs last week"},{title:"Clinic Owners",value:m.loading?"...":(m.clinicOwners||0).toString(),icon:(0,c.jsx)(C.A,{size:24}),iconBg:"#fef3c7",iconColor:"#d97706",barColor:"#d97706",link:"/admin/dashboard/clinics-owners",increase:3,period:"new today"},{title:"Pharmacy Owners",value:m.loading?"...":(m.pharmacyOwners||0).toString(),icon:(0,c.jsx)(C.A,{size:24}),iconBg:"#f3e8ff",iconColor:"#9333ea",barColor:"#9333ea",link:"/admin/dashboard/pharmacies-owners",increase:5,period:"vs last quarter"}],O={labels:(null===(e=v.appointments)||void 0===e?void 0:e.labels)||["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Appointments",data:(null===(a=v.appointments)||void 0===a?void 0:a.data)||[0,0,0,0,0,0],backgroundColor:["rgba(79, 70, 229, 0.8)","rgba(79, 70, 229, 0.7)","rgba(79, 70, 229, 0.6)","rgba(79, 70, 229, 0.5)","rgba(79, 70, 229, 0.4)","rgba(79, 70, 229, 0.3)"],borderColor:"rgba(79, 70, 229, 1)",borderWidth:1,borderRadius:6,maxBarThickness:32}]},F={labels:(null===(s=v.specializations)||void 0===s?void 0:s.labels)||["General"],datasets:[{data:(null===(i=v.specializations)||void 0===i?void 0:i.data)||[1],backgroundColor:["rgba(79, 70, 229, 0.8)","rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(249, 115, 22, 0.8)","rgba(139, 92, 246, 0.8)"],borderColor:["rgba(79, 70, 229, 1)","rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(249, 115, 22, 1)","rgba(139, 92, 246, 1)"],borderWidth:1}]},E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:16,font:{size:12}}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:12},cornerRadius:6}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(229, 231, 235, 0.5)"},ticks:{font:{size:11},color:"rgba(107, 114, 128, 1)"}},x:{grid:{display:!1},ticks:{font:{size:11},color:"rgba(107, 114, 128, 1)"}}}},B=[{href:"/admin/dashboard/users",label:"Manage Users",icon:(0,c.jsx)(k.A,{size:20}),bgColor:"#eef2ff",textColor:"#4338ca",borderColor:"#e0e7ff"},{href:"/admin/dashboard/transactions",label:"Review Transactions",icon:(0,c.jsx)(S.A,{size:20}),bgColor:"#dbeafe",textColor:"#1e40af",borderColor:"#bfdbfe"},{href:"/admin/dashboard/appointments",label:"Manage Appointments",icon:(0,c.jsx)(I.A,{size:20}),bgColor:"#ecfdf5",textColor:"#047857",borderColor:"#d1fae5"},{href:"/admin/dashboard/orders",label:"Review Orders",icon:(0,c.jsx)(S.A,{size:20}),bgColor:"#fffbeb",textColor:"#b45309",borderColor:"#fef3c7"}];return(0,c.jsxs)("div",{className:"admin-dashboard",children:[(0,c.jsx)("header",{className:"header",children:(0,c.jsx)("div",{className:"header-container"})}),(0,c.jsxs)("main",{className:"dashboard",children:[(0,c.jsxs)("div",{className:"dashboard-header",children:[(0,c.jsx)("h1",{className:"dashboard-title",children:"Dashboard Overview"}),(0,c.jsx)("p",{className:"dashboard-subtitle",children:"Welcome back to your medical admin dashboard"})]}),(0,c.jsx)("div",{className:"stats-grid",children:M.map(((e,a)=>(0,c.jsxs)("a",{href:e.link,className:"stat-card animate-fade-in",children:[(0,c.jsxs)("div",{className:"stat-header",children:[(0,c.jsx)("div",{className:"stat-icon",style:{backgroundColor:e.iconBg,color:e.iconColor},children:e.icon}),(0,c.jsx)(z.A,{size:20,style:{color:e.iconColor}})]}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("p",{className:"stat-title",children:e.title}),(0,c.jsxs)("div",{className:"stat-value",children:[e.value,(0,c.jsxs)("span",{className:"stat-increase",children:["+",e.increase,"%"]})]}),(0,c.jsx)("p",{className:"stat-period",children:e.period})]}),(0,c.jsx)("div",{className:"stat-bar",style:{backgroundColor:e.barColor}})]},a)))}),(0,c.jsxs)("div",{className:"charts-grid",children:[(0,c.jsxs)("div",{className:"chart-card animate-slide-up",children:[(0,c.jsxs)("div",{className:"chart-header",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"chart-title",children:"Monthly Appointments"}),(0,c.jsx)("p",{className:"chart-subtitle",children:"Last 6 months activity"})]}),(0,c.jsxs)("div",{className:"chart-actions",children:[(0,c.jsx)("button",{className:"action-button",children:(0,c.jsx)($.A,{size:16})}),(0,c.jsxs)("button",{className:"view-all-button",onClick:()=>n("/admin/dashboard/appointments"),children:["View All ",(0,c.jsx)(z.A,{size:16})]})]})]}),(0,c.jsx)("div",{className:"chart-container",children:v.loading?(0,c.jsx)("div",{className:"chart-loading",children:"Loading appointments data..."}):(0,c.jsx)(y.yP,{data:O,options:{...E,plugins:{legend:{display:!1}}}})})]}),(0,c.jsxs)("div",{className:"chart-card animate-slide-up",children:[(0,c.jsxs)("div",{className:"chart-header",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"chart-title",children:"Doctors by Specialization"}),(0,c.jsx)("p",{className:"chart-subtitle",children:"Distribution across departments"})]}),(0,c.jsxs)("div",{className:"chart-actions",children:[(0,c.jsx)("button",{className:"action-button",children:(0,c.jsx)($.A,{size:16})}),(0,c.jsxs)("button",{className:"view-all-button",onClick:()=>n("/admin/dashboard/doctors"),children:["View All ",(0,c.jsx)(z.A,{size:16})]})]})]}),(0,c.jsx)("div",{className:"chart-container",children:v.loading?(0,c.jsx)("div",{className:"chart-loading",children:"Loading specialization data..."}):(0,c.jsx)(y.Fq,{data:F,options:{...E,cutout:"60%"}})})]})]}),(0,c.jsxs)("div",{className:"activities-container",children:[(0,c.jsxs)("div",{className:"activities-card animate-slide-up",children:[(0,c.jsxs)("div",{className:"activities-header",children:[(0,c.jsx)("h2",{className:"activities-title",children:"Recent Activities"}),(0,c.jsxs)("button",{className:"view-all-button",onClick:()=>n("/admin/dashboard"),children:["View All ",(0,c.jsx)(z.A,{size:16})]})]}),b?(0,c.jsx)("div",{className:"activities-loading",children:"Loading activities..."}):(0,c.jsx)("div",{className:"activities-list",children:j.length>0?j.map((e=>(0,c.jsxs)("div",{className:"activity-item",children:[(0,c.jsx)("div",{className:"activity-icon",style:{backgroundColor:e.iconBg,color:e.iconColor},children:e.icon}),(0,c.jsxs)("div",{className:"activity-content",children:[(0,c.jsx)("h3",{className:"activity-title",children:e.title}),(0,c.jsx)("p",{className:"activity-description",children:e.description})]}),(0,c.jsx)("div",{className:"activity-time",children:e.time})]},e.id))):(0,c.jsx)("div",{className:"no-activities",children:"No recent activities found"})})]}),(0,c.jsxs)("div",{className:"quick-actions-card animate-slide-up",children:[(0,c.jsx)("h2",{className:"quick-actions-title",children:"Quick Actions"}),(0,c.jsx)("div",{className:"quick-actions-grid",children:B.map(((e,a)=>(0,c.jsxs)("a",{href:e.href,className:"action-link",style:{backgroundColor:e.bgColor,color:e.textColor,borderColor:e.borderColor},children:[(0,c.jsx)("div",{className:"action-icon",style:{color:e.textColor},children:e.icon}),(0,c.jsx)("span",{children:e.label})]},a)))})]})]})]})]})},O=e=>{const{type:a}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("section",{className:"layout-section",children:(0,c.jsxs)("div",{className:"layout-container",children:[(0,c.jsx)(h,{}),"dashboard"===a?(0,c.jsx)("div",{className:"dashboard-content",children:(0,c.jsx)("h1",{children:"Super Admin Dashboard"})}):""===a?(0,c.jsx)(M,{}):"users"===a?(0,c.jsx)(f,{userType:"all"}):"doctors"===a?(0,c.jsx)(f,{userType:"doctors"}):"pharmacies-owners"===a?(0,c.jsx)(f,{userType:"pharmacies-owners"}):"clinics-owners"===a?(0,c.jsx)(f,{userType:"clinics-owners"}):"orders"===a?(0,c.jsx)(m.A,{}):"appointments"===a?(0,c.jsx)(u.A,{}):"transactions"===a?(0,c.jsx)(g,{}):(0,c.jsx)("div",{className:"not-found",children:"Page not found"})]})})})}},5621:(e,a,s)=>{s.d(a,{A:()=>m});var t=s(5043),i=s(6213),n=s(3768),r=s(9456),o=s(5089),l=s(8271),d=(s(8067),s(5369)),c=(s(5069),s(7070)),h=s(579);const m=()=>{const[e,a]=(0,t.useState)([]),[s,m]=(0,t.useState)([]),[u,p]=(0,t.useState)(null),[v,x]=(0,t.useState)(!1),[j,g]=(0,t.useState)(""),[b,f]=(0,t.useState)("all"),[y,A]=(0,t.useState)({status:"",shippingInfo:{name:"",address:"",city:"",phone:"",notes:""},items:[]}),[N,w]=(0,t.useState)(localStorage.getItem("token")||""),[C,k]=(0,t.useState)(localStorage.getItem("token")?(0,c.A)(localStorage.getItem("token")):""),S=(0,r.wA)(),{loading:I}=(0,r.d4)((e=>e.root));(0,t.useEffect)((()=>{(async()=>{try{S((0,o.r1)(!0));const e=localStorage.getItem("token");let s="/order/all";null!==C&&void 0!==C&&C.isSuperAdmin&&(s="/order/superadmin/all");const{data:t}=await i.A.get(s,{headers:{authorization:`Bearer ${e}`}}),n=null!==C&&void 0!==C&&C.isSuperAdmin?await z(t.orders||[]):t.orders||[];a(n),m(n)}catch(e){n.oR.error("Failed to fetch orders"),console.error("Fetch error:",e)}finally{S((0,o.r1)(!1))}})()}),[S,null===C||void 0===C?void 0:C.isSuperAdmin]);const z=async e=>{try{const a=[...new Set(e.map((e=>e.pharmacy)))],{data:s}=await i.A.post("/pharmacy/getmultiple",{ids:a},{headers:{authorization:`Bearer ${N}`}}),t=s.pharmacies.reduce(((e,a)=>(e[a._id]=a,e)),{});return e.map((e=>({...e,pharmacyInfo:t[e.pharmacy]||null})))}catch(a){return console.error("Error fetching pharmacy info:",a),e}};(0,t.useEffect)((()=>{let a=e;j&&(a=a.filter((e=>{var a,s,t,i,n,r;return e.orderNumber.toLowerCase().includes(j.toLowerCase())||(null===(a=e.patient)||void 0===a||null===(s=a.name)||void 0===s?void 0:s.toLowerCase().includes(j.toLowerCase()))||(null===(t=e.shippingInfo)||void 0===t||null===(i=t.name)||void 0===i?void 0:i.toLowerCase().includes(j.toLowerCase()))||(null===(n=e.pharmacyInfo)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.toLowerCase().includes(j.toLowerCase()))}))),"all"!==b&&(a=a.filter((e=>e.status===b))),m(a)}),[j,b,e]);const $=e=>{const{name:a,value:s}=e.target;if(a.startsWith("shippingInfo.")){const e=a.split(".")[1];A((a=>({...a,shippingInfo:{...a.shippingInfo,[e]:s}})))}else A((e=>({...e,[a]:s})))},D=async e=>{e.preventDefault();try{S((0,o.r1)(!0));const e=localStorage.getItem("token"),{data:s}=await i.A.put(`/order/${u._id}`,y,{headers:{authorization:`Bearer ${e}`}});a((e=>e.map((e=>e._id===u._id?{...e,...s}:e)))),n.oR.success("Order updated successfully"),x(!1)}catch(r){var s,t;n.oR.error((null===(s=r.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to update order")}finally{S((0,o.r1)(!1))}};return v&&u?(0,h.jsxs)("div",{className:"pharmacy-orders-container",children:[(0,h.jsxs)("div",{className:"dashboard-content",children:[(0,h.jsxs)("button",{onClick:()=>x(!1),className:"back-button",children:[(0,h.jsx)(d.QVr,{})," Back to Orders"]}),(0,h.jsxs)("h2",{children:["Edit Order #",u.orderNumber]}),(0,h.jsxs)("form",{onSubmit:D,className:"order-edit-form",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Status"}),(0,h.jsxs)("select",{name:"status",value:y.status,onChange:$,children:[(0,h.jsx)("option",{value:"processing",children:"Processing"}),(0,h.jsx)("option",{value:"shipped",children:"Shipped"}),(0,h.jsx)("option",{value:"completed",children:"Completed"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),"online"===u.orderType&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h3",{children:"Shipping Information"}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Name"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.name",value:y.shippingInfo.name,onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Address"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.address",value:y.shippingInfo.address,onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"City"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.city",value:y.shippingInfo.city,onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Phone"}),(0,h.jsx)("input",{type:"text",name:"shippingInfo.phone",value:y.shippingInfo.phone,onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Notes"}),(0,h.jsx)("textarea",{rows:1,name:"shippingInfo.notes",value:y.shippingInfo.notes,onChange:$})]})]}),(0,h.jsx)("h3",{children:"Order Items"}),(0,h.jsx)("div",{className:"order-items-edit",children:y.items.map(((e,a)=>{var s;return(0,h.jsxs)("div",{className:"order-item",children:[(0,h.jsxs)("div",{className:"item-info",children:[(0,h.jsx)("span",{children:(null===(s=e.medicineId)||void 0===s?void 0:s.name)||`Medicine ${e.medicineId._id}`}),(0,h.jsxs)("span",{children:["Rs. ",e.price.toFixed(2)," each"]})]}),(0,h.jsxs)("div",{className:"item-quantity",children:[(0,h.jsx)("label",{children:"Qty:"}),(0,h.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:e=>((e,a,s)=>{const t=[...y.items];t[e][a]="quantity"===a?parseInt(s):s,A((e=>({...e,items:t})))})(a,"quantity",e.target.value)})]})]},a)}))}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"button",onClick:()=>x(!1),className:"btn secondary",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"btn primary",children:"Save Changes"})]})]})]}),"      "]}):(0,h.jsx)("div",{className:"pharmacy-orders-container",children:(0,h.jsx)("div",{className:"dashboard-content",children:I?(0,h.jsx)(l.A,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h2",{children:null!==C&&void 0!==C&&C.isSuperAdmin?"All Pharmacy Orders":"My Pharmacy Orders"}),(0,h.jsxs)("div",{className:"order-filters",children:[(0,h.jsxs)("div",{className:"search-box",children:[(0,h.jsx)(d.KSO,{className:"search-icon"}),(0,h.jsx)("input",{type:"text",placeholder:"Search orders...",value:j,onChange:e=>g(e.target.value)})]}),(0,h.jsxs)("div",{className:"filter-dropdown",children:[(0,h.jsx)(d.YsJ,{className:"filter-icon"}),(0,h.jsxs)("select",{value:b,onChange:e=>f(e.target.value),children:[(0,h.jsx)("option",{value:"all",children:"All Statuses"}),(0,h.jsx)("option",{value:"processing",children:"Processing"}),(0,h.jsx)("option",{value:"shipped",children:"Shipped"}),(0,h.jsx)("option",{value:"completed",children:"Completed"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,h.jsx)("div",{className:"table-responsive",children:(0,h.jsxs)("table",{className:"dashboard-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Order #"}),(null===C||void 0===C?void 0:C.isSuperAdmin)&&(0,h.jsx)("th",{children:"Pharmacy"}),(0,h.jsx)("th",{children:"Customer"}),(0,h.jsx)("th",{children:"Total"}),(0,h.jsx)("th",{children:"Status"}),(0,h.jsx)("th",{children:"Date"}),!C.isSuperAdmin&&(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)("tbody",{children:s.length>0?s.map((e=>{var s,t,r;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.orderNumber}),(null===C||void 0===C?void 0:C.isSuperAdmin)&&(0,h.jsx)("td",{children:e.pharmacyInfo?(0,h.jsxs)("div",{className:"pharmacy-info",children:[(0,h.jsx)("div",{className:"pharmacy-name",children:e.pharmacyInfo.name}),(0,h.jsxs)("div",{className:"pharmacy-address",children:[e.pharmacyInfo.address,", ",e.pharmacyInfo.city]})]}):"Unknown Pharmacy"}),(0,h.jsx)("td",{children:(null===(s=e.patient)||void 0===s?void 0:s.name)||(null===(t=e.shippingInfo)||void 0===t?void 0:t.name)||"Pharmacy"}),(0,h.jsxs)("td",{children:["Rs. ",null===(r=e.totalAmount)||void 0===r?void 0:r.toFixed(2)]}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:`status-badge ${e.status}`,children:e.status})}),(0,h.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,h.jsx)("td",{className:"actions",children:!C.isSuperAdmin&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{onClick:()=>(e=>{p(e),A({status:e.status,shippingInfo:e.shippingInfo||{name:"",address:"",city:"",phone:"",notes:""},items:e.items.map((e=>{var a;return{...e,medicineId:null!==(a=e.medicineId)&&void 0!==a&&a._id?e.medicineId:{_id:e.medicineId}}}))}),x(!0)})(e),className:"btn-icon",title:"Edit",children:(0,h.jsx)(d.uO9,{})}),(0,h.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this order?"))try{S((0,o.r1)(!0));const s=localStorage.getItem("token");await i.A.delete(`/order/${e}`,{headers:{authorization:`Bearer ${s}`}}),a((a=>a.filter((a=>a._id!==e)))),n.oR.success("Order deleted successfully")}catch(s){n.oR.error("Failed to delete order")}finally{S((0,o.r1)(!1))}})(e._id),className:"btn-icon danger",title:"Delete",children:(0,h.jsx)(d.qbC,{})})]})})]},e._id)})):(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:null!==C&&void 0!==C&&C.isSuperAdmin?7:6,className:"no-orders",children:"No orders found matching your criteria"})})})]})})]})})})}},7636:()=>{},8646:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8800:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])}}]);
//# sourceMappingURL=9.cb9058ab.chunk.js.map