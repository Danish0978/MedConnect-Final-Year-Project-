"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[874],{7874:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var i=t(5043),r=t(9456),a=t(5089),n=t(8271),l=t(6760),o=t(1772),c=t(5560),d=(t(2904),t(6213)),h=t(7070),p=t(579);const u=()=>{const[e,s]=(0,i.useState)([]),[t,u]=(0,i.useState)([]),[j,x]=(0,i.useState)(""),[v,m]=(0,i.useState)(null),g=(0,r.wA)(),{loading:N}=(0,r.d4)((e=>e.root)),[f]=(0,i.useState)(localStorage.getItem("token")?(0,h.A)(localStorage.getItem("token")):null);(0,i.useEffect)((()=>{(async()=>{try{g((0,a.r1)(!0));const{data:e}=await d.A.get("/predict/report",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s((null===e||void 0===e?void 0:e.data)||[]),u((null===e||void 0===e?void 0:e.data)||[]),m(null)}catch(v){console.error("Error fetching reports:",v),m("Failed to load reports")}finally{g((0,a.r1)(!1))}})()}),[]),(0,i.useEffect)((()=>{if(e.length>0){const s=null!==f&&void 0!==f&&f.isDoctor?e.filter((e=>{var s;return`${(null===(s=e.patient)||void 0===s?void 0:s.name)||""}`.toLowerCase().includes(j.toLowerCase())})):e;u(s)}}),[j,e,null===f||void 0===f?void 0:f.isDoctor]);return N?(0,p.jsx)(n.A,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{}),(0,p.jsxs)("div",{className:"doctor-prescriptions-section",children:[(0,p.jsx)("h1",{className:"page-heading",children:"My Health Reports"}),(null===f||void 0===f?void 0:f.isDoctor)&&(0,p.jsx)("div",{className:"search-bar",children:(0,p.jsx)("input",{type:"text",placeholder:"Search by patient name...",value:j,onChange:e=>x(e.target.value)})}),v?(0,p.jsx)("p",{className:"error-message",children:v}):t.length>0?(0,p.jsx)("div",{className:"prescriptions-list",children:t.map((e=>{var s,t,i;return(0,p.jsxs)("div",{className:"prescription-card",children:[(0,p.jsx)("h3",{className:"report-title",children:"diabetes"===e.type?"Diabetes Risk Assessment":"COVID-19 Screening"}),(0,p.jsxs)("div",{className:"report-header",children:[(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Date:"})," ",e.date," at ",e.time]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Risk Score:"})," ",(100*e.prediction).toFixed(2),"%"]}),(0,p.jsxs)("p",{className:`result-${e.predictionResult}`,children:[(0,p.jsx)("strong",{children:"Conclusion:"})," ",1===e.predictionResult?"Positive":"Negative"]})]}),(null===f||void 0===f?void 0:f.isDoctor)&&e.patient&&(0,p.jsxs)("div",{className:"patient-info",children:[(0,p.jsx)("h4",{children:"Patient Details"}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Name:"})," ",e.patient.name]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Email:"})," ",(null===(s=e.patient.contact)||void 0===s?void 0:s.email)||"Not provided"]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Phone:"})," ",(null===(t=e.patient.contact)||void 0===t?void 0:t.phone)||"Not provided"]})]}),(i=e.features,i?(0,p.jsxs)("div",{className:"features-section",children:[(0,p.jsx)("h4",{children:"Clinical Parameters"}),(0,p.jsx)("div",{className:"features-grid",children:Object.entries(i).map((e=>{let[s,t]=e;return(0,p.jsxs)("p",{children:[(0,p.jsxs)("strong",{children:[s.split(/(?=[A-Z])/).join(" "),":"]}),"boolean"===typeof t?t?" Yes":" No":` ${t}`]},s)}))})]}):null)]},e._id)}))}):j?(0,p.jsx)("p",{className:"no-results",children:"No matching reports found"}):(0,p.jsx)(l.A,{message:"No reports available"})]}),(0,p.jsx)(c.A,{})]})}}}]);
//# sourceMappingURL=874.35331589.chunk.js.map